<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ù†Ø¸Ø§Ù… Ø®Ø¯Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ - Ù…ØºØ³Ù„Ø© Ø³ÙŠØ§Ø±Ø§Øª</title>
  <style>
    body {
      font-family: Tahoma, Arial, sans-serif;
      background: #f4f7fa;
      margin: 0;
      color: #333;
    }
    header {
      background: #0d6efd;
      color: white;
      padding: 15px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    header h1 { margin: 0; font-size: 18px; }
    header button {
      background: white;
      color: #0d6efd;
      border: none;
      padding: 8px 14px;
      border-radius: 6px;
      cursor: pointer;
      font-weight: bold;
    }
    .container {
      max-width: 900px;
      margin: 20px auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    h2 { margin-top: 0; color: #0d6efd; }
    input, button {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 14px;
    }
    button.primary {
      background: #0d6efd;
      color: white;
      border: none;
      cursor: pointer;
    }
    .card {
      background: #f9f9f9;
      padding: 15px;
      border-radius: 8px;
      margin-top: 15px;
      border: 1px solid #ddd;
    }
    .hidden { display: none; }
  </style>
</head>
<body>

<header>
  <h1>ğŸš— Ù†Ø¸Ø§Ù… ØªÙ†Ø¸ÙŠÙ… Ù…ØºØ³Ù„Ø© Ø§Ù„Ø³ÙŠØ§Ø±Ø§Øª</h1>
  <button onclick="toggleSearch()">Ø§Ø¨Ø­Ø« Ø¹Ù† Ø³ÙŠØ§Ø±ØªÙƒ</button>
</header>

<div class="container hidden" id="searchSection">
  <h2>ğŸ” Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø³ÙŠØ§Ø±Ø©</h2>
  <input type="number" id="searchId" placeholder="Ø£Ø¯Ø®Ù„ ID Ø§Ù„Ø³ÙŠØ§Ø±Ø© (4 Ø£Ø±Ù‚Ø§Ù…)" />
  <button class="primary" onclick="searchCar()">Ø¨Ø­Ø«</button>
  <div id="searchResult"></div>
</div>

<div class="container" id="adminLogin">
  <h2>ğŸ” Ø¯Ø®ÙˆÙ„ ØµØ§Ø­Ø¨ Ø§Ù„Ù…Ø­Ù„</h2>
  <input type="password" id="adminPass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±" />
  <button class="primary" onclick="loginAdmin()">Ø¯Ø®ÙˆÙ„</button>
</div>

<div class="container hidden" id="adminPanel">
  <h2>âš™ï¸ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h2>
  <input id="workerName" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¹Ø§Ù…Ù„" />
  <input id="carType" placeholder="Ù†ÙˆØ¹ Ø§Ù„Ø³ÙŠØ§Ø±Ø©" />
  <input id="phoneNumber" placeholder="Ø±Ù‚Ù… Ù‡Ø§ØªÙ Ø§Ù„Ø²Ø¨ÙˆÙ†" />
  <input id="exitDate" placeholder="Ù…ÙˆØ¹Ø¯ Ø®Ø±ÙˆØ¬ Ø§Ù„Ø³ÙŠØ§Ø±Ø©" />
  <button class="primary" onclick="addCar()">â• Ø¥Ø¶Ø§ÙØ© Ø³ÙŠØ§Ø±Ø©</button>
  <div id="adminList"></div>
</div>

<script>
  const PASSWORD = "RDT";
  let cars = JSON.parse(localStorage.getItem("cars") || "[]");

  function toggleSearch() {
    document.getElementById('searchSection').classList.toggle('hidden');
  }

  function loginAdmin() {
    const pass = document.getElementById('adminPass').value.trim();
    if (pass === PASSWORD) {
      document.getElementById('adminLogin').classList.add('hidden');
      document.getElementById('adminPanel').classList.remove('hidden');
      renderAdmin();
    } else {
      alert('âŒ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©');
    }
  }

  function generateId() {
    let id;
    do {
      id = Math.floor(1000 + Math.random() * 9000);
    } while (cars.some(c => c.id === id));
    return id;
  }

  function addCar() {
    const worker = workerName.value.trim();
    const car = carType.value.trim();
    const phone = phoneNumber.value.trim();
    const date = exitDate.value.trim();

    if (!worker || !car || !phone || !date) {
      alert('âš ï¸ ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„');
      return;
    }

    const newCar = {
      id: generateId(),
      worker,
      car,
      phone,
      date
    };

    cars.push(newCar);
    localStorage.setItem('cars', JSON.stringify(cars));
    renderAdmin();

    workerName.value = '';
    carType.value = '';
    phoneNumber.value = '';
    exitDate.value = '';

    alert('âœ… ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø³ÙŠØ§Ø±Ø© Ø¨Ù†Ø¬Ø§Ø­. ID = ' + newCar.id);
  }

  function renderAdmin() {
    const adminList = document.getElementById('adminList');
    adminList.innerHTML = '';
    cars.forEach((c, index) => {
      adminList.innerHTML += `
        <div class="card">
          <b>ID:</b> ${c.id}<br>
          ğŸ‘· Ø§Ù„Ø¹Ø§Ù…Ù„: ${c.worker}<br>
          ğŸš— Ø§Ù„Ø³ÙŠØ§Ø±Ø©: ${c.car}<br>
          ğŸ“ Ø§Ù„Ù‡Ø§ØªÙ: ${c.phone}<br>
          â° Ø§Ù„Ø®Ø±ÙˆØ¬: ${c.date}<br><br>
          <button onclick="deleteCar(${index})" style="background:#dc3545;color:white;border:none;padding:8px;border-radius:6px;cursor:pointer;">ğŸ—‘ï¸ Ø­Ø°Ù Ø§Ù„Ø¹Ù…ÙŠÙ„</button>
        </div>`;
    });
  }

  function deleteCar(index) {
    if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ø¹Ù…ÙŠÙ„ØŸ')) {
      cars.splice(index, 1);
      localStorage.setItem('cars', JSON.stringify(cars));
      renderAdmin();
    }
  }

  function searchCar() {
    const id = Number(document.getElementById('searchId').value);
    const car = cars.find(c => c.id === id);
    const searchResult = document.getElementById('searchResult');
    if (!car) {
      searchResult.innerHTML = 'âŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø³ÙŠØ§Ø±Ø© Ø¨Ù‡Ø°Ø§ Ø§Ù„Ø±Ù‚Ù…';
    } else {
      searchResult.innerHTML = `
        <div class="card">
          ğŸ‘· <b>Ø§Ù„Ø¹Ø§Ù…Ù„:</b> ${car.worker}<br>
          ğŸš— <b>Ø§Ù„Ø³ÙŠØ§Ø±Ø©:</b> ${car.car}<br>
          ğŸ“ <b>Ø§Ù„Ù‡Ø§ØªÙ:</b> ${car.phone}<br>
          â° <b>Ù…ÙˆØ¹Ø¯ Ø§Ù„Ø®Ø±ÙˆØ¬:</b> ${car.date}
        </div>`;
    }
  }
</script>

</body>
</html>
